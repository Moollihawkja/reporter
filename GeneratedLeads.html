<!DOCTYPE html>
<html>

<head>
	<title>Experimental Dashboard</title>
	<style>
		* {
			font-family: Arial;
		}

		body {
			background-color: #232323;
			color: #EFEFEF;
		}

		label, input, button {
			display:block;
			margin:0.5em;
		}

		button {
			font-size:1.15em;
		}

	</style>
	<script src="http://nether.space/plotly.js"></script>
	<script src="http://nether.space/libs/restfull.js"></script>
</head>

<body>	
	<h1>Lead Analysis</h1>
	<div>
		<h2>Choose the date range</h2>
		<div id='dateRange'>
			<label>Start Date:</label>
			<input type='text' id='start'/>
			<label>End Date:</label>
			<input type='text' id='end'/>
			<button id='run'>Run</button>
		</div>
		<script>
			var	endDate = new Date(),
				startDate = new Date()
			;
			startDate.setDate(startDate.getDate() - 30);
			endDate.setDate(endDate.getDate() + 1);

			function pad(n) {
				return n < 10 ? '0' + n : ''+ n;
			}

			function isTest(r) {
				if(!r.applicant) return true;
				if(!r.trackingLabel) return true;
				if(['SIMULATOR', 'LENDERTEST'].indexOf(r.backendPath) > -1) return true;
				if(/@autofi\./i.test(r.applicant.email)) return true;
				if(r.applicant.isTestUser) return true;
				if(r.trackingLabel.isTest || r.trackingLabel.isDuplicate || r.trackingLabel.isFake) return true;
				return false;
			}

			document.querySelector('#start').value = startDate.toLocaleDateString();
			document.querySelector('#end').value = endDate.toLocaleDateString();
			document.querySelector('#run').addEventListener('click', function() {
				var endDate = new Date(document.querySelector('#end').value)
					, startDate = new Date(document.querySelector('#start').value)
				;

				var path = 'http://localhost:3272/query' // 'http://bogoin.herokuapp.com/query'; 
					query = {
						loanApplications: {
							find: {
									dateCreated: { $gte: startDate.toISOString(), $lt: endDate.toISOString() }
								}
							, select: '_id trackId dateCreated applicant.email applicant.phone applicant.name.first applicant.name.last applicant.isTestUser trackingLabel.isTest trackingLabel.isDuplicate trackingLabel.isFake backendPath vehicle.vin'
							, lean: null
						},
						leads: {
							find: {
								dateCreated: { $gte: startDate.toISOString(), $lt: endDate.toISOString() }
							}
							, select: '_id trackId dateCreated applicant.email applicant.phone applicant.name.first applicant.name.last vehicle.vin'
							, lean: null
						}
					};

				window.restfull.post({ path: path, data: query, headers: { secret: localStorage.reporterSecret } }, function(err, resp) {
					if (err) {
						return log(err);
					}
					resp = JSON.parse(resp);
					console.log(resp)
					var leads = resp[1]
						, apps = resp[0]
						, joinedData = [leads, apps].reduce((o, a, i) => {
							a.forEach(r => {
								var dateCreated = new Date(r.dateCreated)
								o[r.trackId] = o[r.trackId] || {};
								o[r.trackId][i ? 'app' : 'lead']  = dateCreated;
								o[r.trackId].dateCreated = o[r.trackId].dateCreated 
									? (o[r.trackId].dateCreated > dateCreated ? o[r.trackId].dateCreated : dateCreated)
									: dateCreated;
								o[r.trackId].isTest = i ? isTest(r) : false;
								o[r.trackId].applicant = (r.applicant && r.applicant.name && r.applicant.name.first) ? `${r.applicant.name.first} ${r.applicant.name.last}` : undefined;
								o[r.trackId].email = (r.applicant &&  r.applicant.email) ? r.applicant.email : undefined;
								o[r.trackId].phone = (r.applicant && r.applicant.phone) ? r.applicant.phone : undefined;
								o[r.trackId].vehicle = (r.vehicle && r.vehicle.vin) ? r.vehicle.vin : undefined;

							});
							return o;
						}, {})
					;
					console.log('JOINED', joinedData);

					var dedupedData = Object.keys(joinedData).reduce((o, r) => {
							var obj = {trackId: r}
								, v = joinedData[r]
								, name = v.applicant
							;
							if(!name || !v.vehicle) return o;
							o[name] = o[name] || [];
							o[name].push(v) 

							return o;
						}, {})
					;
					console.log('DEDUPED', dedupedData);


					var dailyCount = Object.keys(dedupedData).reduce((o, d) => {
							dedupedData[d].reduce((v, r) => {
								if(v[r.vehicle]) return v;
								v[r.vehicle] = true;
								var x = r.dateCreated
									, k = `${x.getFullYear()}-${pad(x.getMonth() + 1)}-${pad(x.getDate())}`
								;
								o[k] = o[k] || 0;
								o[k]++;
								return v;						
							}, {})
							return o;
						}, {})
						, dailyCountArr = Object.keys(dailyCount).map(d => {
							return {
								date: d
								, count: dailyCount[d]
							}
						}).sort((a, b) => a.date > b.date ? 1: -1)
					;
					console.log('DAILY COUNT', dailyCountArr);

					var ampDates= '11/21/17,11/22/17,11/23/17,11/24/17,11/25/17,11/26/17,11/27/17,11/28/17,11/29/17,11/30/17,12/1/17,12/2/17,12/3/17,12/4/17,12/5/17,12/6/17,12/7/17,12/8/17,12/9/17,12/10/17,12/11/17,12/12/17,12/13/17,12/14/17,12/15/17,12/16/17,12/17/17,12/18/17,12/19/17,12/20/17'
						, ampCount = '42,36,16,22,26,18,28,57,28,42,31,30,19,31,54,55,34,39,34,25,38,50,37,47,66,48,31,30,44,44'

						, ampDailyCount = [ampDates, ampCount].reduce((o, s, i) => {
							var arr = s.split(',').map(c => c.trim());
							arr.reduce((ob, a, j) => {
								var k;
								if(i === 0) {
									var x = new Date(a)
									k = `${x.getFullYear()}-${pad(x.getMonth() + 1)}-${pad(x.getDate())}`
									ob[k] = 0;
								} else {
									k = Object.keys(ob)[j]
									ob[k] = parseInt(a);
								}
								return ob;
							}, o)
							return o;
						}, {})
						, ampDailyCountArr = Object.keys(ampDailyCount).map(d => {
							return {
								date: d
								, count: ampDailyCount[d]
							}
						}).sort((a, b) => a.date > b.date ? 1: -1)
					;
					console.log('AMP DAILY COUNT', ampDailyCountArr);

					var noTestCount = Object.keys(dedupedData).reduce((o, d) => {
							dedupedData[d].reduce((v, r) => {
								if(v[r.vehicle]) return v;
								if(r.isTest) return v;
								v[r.vehicle] = true;
								var x = r.dateCreated
									, k = `${x.getFullYear()}-${pad(x.getMonth() + 1)}-${pad(x.getDate())}`
								;
								o[k] = o[k] || 0;
								o[k]++;
								return v;						
							}, {})
							return o;
						}, {})
						, noTestCountArr = Object.keys(noTestCount).map(d => {
							return {
								date: d
								, count: noTestCount[d]
							}
						}).sort((a, b) => a.date > b.date ? 1: -1)
					;
					console.log('NO TEST COUNT', noTestCountArr);

					document.querySelector('#leads').style.display = 'block';
					var mongoData = {
							x: dailyCountArr.map(d => d.date)
							, y: dailyCountArr.map(d => d.count)
							, type: 'scatter'
							, name: 'MongoDB -> DeDuped'
							, mode: "lines"
							, line: {color: '#888'}
						}
						, amplitudeData = {
							x: ampDailyCountArr.map(d => d.date)
							, y: ampDailyCountArr.map(d => d.count)
							, type: 'scatter'
							, name: 'Amplitude'
							, mode: "lines"
							, line: {color: '#F00'}
						}
						, noTestData = {
							x: noTestCountArr.map(d => d.date)
							, y: noTestCountArr.map(d => d.count)
							, type: 'scatter'
							, name: 'MongoDB -> DeDuped & No Tests'
							, mode: "lines"
							, line: {color: '#0F0'}
						}
					;
					Plotly.newPlot('leadPlot', [amplitudeData,mongoData,noTestData ]);

					// var ampTrackIds = ['1513055247203','1511885985574','1513189851007','1513186832386','1512523144338','1512419484338','1512858729217','1511754164800','1512599066848','1510865915737','1513186966274','1510762477559','1511216091775','1511027638084','1512661891080','1511910952380','1512367891538','1511646352000','1513354452520','1512683293145','1513201217559','1511820910373','1513067152922','1512535720034','1513285355888','1512437148161','1512882112494','1513010965450','1513014606954','1513052793043','1513176373383','1513193004563','1513213467233','1512856592545','1511196070882','1513091528278','1510710382620','1512934761046','1513130403294','1512748884169','1512758909719','1512361827847','1513240074057','1510906746770','1510857745646','1511416724649','1511965888691','1511975877208','1511737465209','1512440743618','1513228629361','1512620667558','1513091620344','1512764195086','1512271292655','1512425467756','1512779331954','1511316317386','1513271370086','1511231207031','1511209839952','1512458314293','1511893878057','1512457730423','1511911603918','1512492668945','1512155631827','1510804632410','1512448554035','1511796698168','1511293726083','1512425726451','1511634589181','1513019507734','1511231348850','1511014584571','1511332626690','1513013822938','1511293563920','1511126650657','1510964457022','1510843496365','1513211229366','1512281914044','1512577564518','1511121949888','1511197417342','1511567976580','1510952067288','1513095455768','1511643503577','1512601788069','1512272724302','1511974952986','1513224946544','1511234277890','1510767300711','1512757354013','1511810092953','1510854432551','1512339815905','1512691576132','1512258871468','1511921487358','1512774949792','1512742994400','1510952930250','1512075474740','1511575437573','1513287522000','1513196449034','1513179271440','1511196281864','1513177028408','1511836465534','1511798174437','1510754468988','1511126204372','1513206330523','1510952046004','1510943923043','1510852155924','1511590134254','1513353238110','1513049369503','1512353129217','1513339941880','1512840056079','1511808660270','1511825298008','1513035880346','1511987500135','1511907951114','1511007336710','1512618671030','1513261742982','1510861915145','1512492830597','1513026155714','1512844442933','1512334160447','1513186640931','1510941163879','1510859407079','1511193646923','1511489115583','1512524499444','1512696870065','1511870070546','1510966652564','1511203967570','1511466010106','1512175366198','1511995720645','1512444732441','1512426596909','1511488866411','1512679942715','1510856565264','1511993454777','1512849447745','1511817517172','1512506584711','1512570379306','1513013712917','1513115539561','1511190989110','1512150818722','1511261157984','1511695824714','1512401120123','1510871643147','1512520517553','1511044658644','1512410590132','1512709295848','1512073855254','1512437427064','1512351149238','1513293954414','1511323043188','1511889700127','1513355613675','1512534917547','1512512919248','1512519054488','1512869815853','1512135522767','1512544762178','1511189059485','1511389926283','1510853944849','1512241139843','1512678708120','1512048339359','1510950598376','1512451851667','1510868868201','1511676638801','1511977649320','1510862410594','1512923108962','1511190603746','1510867300099','1511905958494','1513363938364','1513305644892','1511456896011','1511366220665','1513037273398','1513348949535','1512711895771','1513301671349','1512134618663','1513270353356','1511596356333','1513300535976','1512163682552','1513368324353','1513265084603','1511147997661','1512433199007','1511595567974','1511192748046','1512107344479','1511589622605','1512407126126','1511898178070','1512574624569','1510902374529','1513372278147','1512665392013','1511839528250','1512581314582','1513033387807','1512582409266','1511585112248','1511282142785','1513120568584','1512061095701','1512668124335','1511874573534','1510893265951','1513033125923','1512735214963','1513095147668','1512079257850','1510934455084','1512930205140','1511156947445','1511120421195','1511921516138','1512945683781','1513034111454','1513282756395','1511184454581','1512750883404','1512802043137','1512442652211','1512048647800','1512697191172','1512513686185','1513356123752','1510788995568','1510857649230','1512569050468','1513038520865','1512765375015','1512168549854','1510881830915','1513176538304','1511917049134','1512004858983','1512778219609','1511292935218','1512417834531','1512004946044','1513056452037','1512156646379','1511894260637','1510805312006','1513180186984','1512072567392','1510852595786','1512252672831','1511899434519','1511380338860','1512588191364','1512241590834','1510947586616','1511612521286','1510772771144','1511967059319','1511905534951','1512055394131','1511285604802','1512328695838','1513259641540','1513349056893','1512581761739','1511724390600','1511899042888','1511821438085','1511356696031','1512604664735','1512235123759','1511549566420','1513370274297','1512585484795','1511903882148','1511196850012','1510951417378','1512565575994','1510883538369','1512779816026','1513362116543','1511269699567','1513352781567','1511315382571','1512858073812','1512825393141','1513251048288','1513225367721','1512679356440','1513198448185','1512978590819','1511580431464','1512864709801','1511018738410','1512163502017','1512835724014','1510800963896','1510783501202','1513092124469','1513012707957','1512191516872','1511879298405','1511545460755','1513306330992','1512189177301','1512944234184','1512086690939','1512358658146','1512455071459','1512487388516','1511269019668','1512247336616','1511208981425','1513359196363','1511725472899','1512576126448','1513134462321','1511750967802','1511740329681','1512583155916','1511370672494','1511907728723','1511859475833','1512493535414','1511287044360','1510793663181','1510819624850','1512524574364','1513305519632','1511801494463','1512070856262','1513210787185','1512240614164','1511808727111','1511286532769','1512838682831','1512277404985','1512062016549','1511466106357','1511108258651','1511388210725','1512434630053','1510880993763','1512043938340','1512951623876','1513322679982','1511880669107','1510937426355','1513124960116','1511197303127','1511398687901','1512571896241','1511192217027','1512353362119','1512182480512','1511219343959','1512779562167','1512091670897','1511812251288','1513017379154','1513297610764','1510794418179','1513139142411','1512859484525','1511400494173','1512996428243','1512435491552','1513091309609','1511832764875','1510795054530','1510753070670','1510953021145','1512681713153','1512047907513','1512653241210','1511304509657','1513197218135','1513317636647','1511382106578','1511366231107','1513353815758','1511289703110','1511919148011','1511901603556','1512142621214','1511920042716','1512769997676','1512528417529','1513054955100','1513353306992','1511324443824','1513082692694','1512172211024','1512529272655','1512191191929','1512771834389','1513093195114','1513221849074','1513354823158','1511135848441','1512096592249','1511579021630','1510857513226','1511380890757','1513047322554','1512598301331','1511831237003','1510802429367','1511640711933','1512077876723','1513093582187','1513027515612','1513037193096','1511928455027','1512002114563','1512362621749','1512250643870','1512936155828','1512677460022','1512053886920','1511665371089','1512078210462','1511279290025','1513305941717','1512746539136','1513360610873','1513041265460','1511732410994','1512503427430','1513337162486','1513368686300','1511310264272','1512274606109','1511900579108','1511888362973','1511191655804','1510857465160','1512519372794','1511729007326','1512356309529','1513367430692','1512105834403','1512351168224','1512457590602','1512334304645','1512107647558','1512586452103','1511889672756','1512830225424','1511886517490','1513203422003','1513006418336','1511281728039','1513270605736','1511066371709','1512932497260','1511609280834','1513018380401','1512234844657','1512356785565','1513263162941','1512663540360','1513363662449','1511885057176','1511209620568','1512072289349','1513048932156','1512431473518','1511362485133','1511920967343','1511328875387','1511800261328','1513111841826','1511842097898','1510857548631','1511539945562','1511819606461','1511331004469','1512765670048','1510794637367','1512142427142','1512837060908','1512673855507','1511378159948','1512434971201','1512329853107','1513329936757','1512867861280','1513354954237','1512595352821','1511583582811','1513344513811','1512610055590','1512178794932','1513326210280','1511822359316','1512171103558','1513270001330','1512753933132','1510956480870','1512680686507','1511043761863','1510868566217','1512566224877','1512916155608','1511166923745','1511209562484','1512863105234','1512489053318','1512340498294','1511885995449','1511818986232','1513017960339','1512712170868','1512316803366','1512009533037','1513240327327','1510847799525','1512518205417','1512698071678','1513330099951','1510885352972','1513362326493','1512518933615','1510952246450','1511301658970','1513098165534','1513107377704','1512242780236','1513354591399','1511277956546','1512406016303','1513037770272','1511130117128','1511889895316','1512760283646','1513113919764','1510784107326','1512105163246','1512259252368','1512533805091','1512133066666','1511844713455','1511387811419','1512747877094','1512585062125','1513354709880','1511616470894','1511589189138','1512762503349','1512043707166','1511637033065','1512169961304','1512051759836','1513008028216','1512564847104','1512056422790','1512677440453','1511789440897','1511279399895','1512516077146','1512335274697','1511125725633','1513209956199','1511286161418','1513369964197','1512241713309','1512465173135','1513095647282','1511031207398','1510857237177','1512941043568','1512957973577','1513371974529','1511444104503','1513054322903','1512073110304','1512779107721','1512175993840','1511264501574','1511333567836','1511279653381','1512766027096','1513269322916','1511386416822','1511634358831','1512534381891','1511450283860','1511890900404','1512012995776','1510967783934','1512572669562','1512851065783','1510955762402','1513128128733','1511750879994','1513188476481','1511272865575','1510874724055','1511878313400','1510793607323','1513000187713','1512478974084','1513264410833','1513233555062','1512230942482','1511397783729','1512100514770','1511297247708','1512502355724','1511547136411','1513360992668','1510794882539','1512264402409','1512954066629','1510937705543','1512862205931','1513291047164','1512160710206','1511881350941','1513022044723','1513090105259','1511979965992','1512341477084','1512535317595','1512581959453','1511969777403','1512622625263','1513301321746','1511884515198','1513288884802','1510934896974','1511779361312','1512323489295','1512957846656','1512624407412','1510875665102','1510948541986','1512488299783','1511281988045','1511900915234','1512945240175','1511551738521','1511280975415','1511534563480','1510784346640','1510894622661','1513056657690','1511979851701','1510927690516','1512053267247','1511196534145','1512492208562','1512694233543','1511034631361','1513264133004','1510854200880','1512507479512','1511442973142','1512573224798','1512420605451','1512681427366','1513008422225','1512163567650','1512576883161','1511881348092','1513102920059','1510769860646','1510854633638','1513169389863','1510979954884','1512665599344','1511146618805','1513375137376','1512453518626','1511563011189','1512479761121','1511078276457','1512779429469','1513260922602','1512501159514','1512094104422','1512950287901','1511768909637','1513221656499','1512054406147','1513105152128','1510783236954','1510853734402','1512954923708','1512500343583','1511562173783','1510951290088','1511496009685','1512458122442','1513349210506','1512698044943','1512439141553','1510859874527','1512747290657','1512498508250','1512508411848','1512348369087','1510772316414','1511908924618','1511661069044','1511895006672','1511390501640','1512092431164','1512140195937','1511197041717','1511193530388','1511289220963','1510794538808','1510792572625','1511302067536','1512522578945','1512485804600','1513094224600','1511817964202','1510989739754','1513140475883','1512083361200','1511200466457','1511193672618','1511739609362','1512230297640','1513188329403','1512489759236','1512779837456','1513367982256','1511594020403','1512006360556','1512763293925','1512777863553','1511371858230','1511210416758','1512185301303','1511299958789','1511315541037','1511928972519','1513002192356','1512004227171','1511918889033','1512852390853','1511299672760','1512071095189','1511462384892','1511640405671','1513270759501','1513138007338','1511234834048','1513252542254','1512060294862','1511284489013','1511997883498','1511889624896','1512953194818','1512078999594','1510788165975','1510839372270','1512579899750','1512599362505','1511882746298','1511370192905','1511306305465','1513025144421','1513365328537','1512942428282','1511378233991','1511379404863','1510713197779','1513117960624','1512189343500','1512145849891','1513299999093','1512935923869','1511299954595','1511192102895','1512070061201','1510704735569','1510810728077','1512513053213','1512357527430','1511912161904','1511637887149','1512258797307','1510854526149','1512404161358','1511264196416','1512248784232','1513349141922','1513133109707','1510920722653','1513024156747','1512057434993','1513108365012','1512819522518','1511878470744','1512599720699','1511064339408','1512671503009','1513216753966','1510765256862','1513039053382','1511244812311','1512512586600','1512583815956','1512243663271','1510945116740','1511318324024','1513212311287','1511906516278','1511491572311','1512706020725','1513033161339','1513291591088','1510858251004','1511885411290','1513354008276','1512706094926','1512879695733','1513213934575','1512613161461','1511016837949','1510874162665','1512403394796','1513196250804','1512164656735','1512794511795','1511373903214','1511362243663','1512961027089','1513036983578','1511373444801','1511931843249','1513289126422','1511500135237','1511498503351','1512748339657','1512576157598','1511738835050','1511891780324','1510836915579','1512778962009','1513052732191','1510866062656','1511976629310','1510959539481','1512572384329','1510964404274','1512422765951','1513091722684','1513211781089','1511613809139','1511501608304','1510853853543','1511121400772','1513098480048','1513054872772','1511293718689','1511841146306','1511550087696','1510755582649','1511540497596','1512437372896','1511203977390','1511039294495','1513102018613','1510859658437','1510860043948','1513361343688','1511741579457','1512034197906','1511808951884','1512049812267','1512665600526','1512943950177','1511385958622','1511665753202','1510857846489','1512242279001','1513356736581','1513178108646','1510857850439','1513110659166','1512883799103','1510767493010','1512701416712','1512017791340','1511184760320','1512929992495','1513038003697','1510770117159','1513139935366','1512514629217','1511907409524','1511479941938','1511552339006','1512329568895','1511800499765','1513214419411','1511481046783','1510941411828','1513215544835','1513267455329','1513178582704','1511996486205','1511893254816','1512958251309','1510803742139','1512245640022','1512432160352','1513105542978','1511293653592','1511035111794','1512854922533','1512872157558','1511705256691','1512632449547','1511374504546','1511229970742','1513330257795','1513271758060','1512681330359','1512684114694','1513015403752','1511634010927','1510785123864','1512518642705','1510852439321','1512777913206','1510721594557','1512360981578','1510950249118','1513065020118','1511399327134','1513304093158','1512396924578','1512945316598','1512251558661','1511150614805','1510933979569','1510854340382','1512743264094','1512060735909','1511900320367','1511972141443','1512443429701','1512599181034','1512696859457','1513374023027','1512696427401','1513101539624','1510937754421','1512690451732','1512087231429','1511508466526','1510860181986','1511669394081','1511827257010','1513021038484','1512068083761','1513123223366','1510868640855','1512608169188','1511321207736','1511448190361','1511329589732','1510952203423','1513277677460','1513131138332','1512495731360','1512175475134','1512096290037','1511456008811','1511563984836','1512794220432','1511103540663','1511740355718','1512425208221','1512659000744','1512692305375','1511104613131','1511001934453','1511812882724','1511728524421','1512250178092','1512670516141','1510858573040','1510806060085','1512947271360','1512518395227','1512330847705','1511928659134','1510847359596','1510857370114','1511891065438','1512965311616','1512428111801','1511809238369','1512743719940','1512507277864','1511823500333','1511931929499','1511905295084','1510800812099','1510936933691','1513138232937','1512580892920','1512537624249','1511894675322','1511301907991','1513004891445','1512053258563','1511558508446','1512438312833','1512423180370','1512585044980','1513365840700','1512441979531','1512609879675','1511073830163','1512861729352','1513280042388','1511884870330','1511292600629','1513196580736','1512679229154','1512527631725','1513285886274','1512823169040','1512664155472','1511127316075','1511634507602','1512503936780','1512329517110','1510928977711','1513321356074','1511904112638','1513132369656','1511196742148','1510963612103','1511562838233','1513140671244','1512779215954','1510867608972','1512868289008','1511732404760','1512058516351','1512945723897','1512750216001','1513370530336','1510868146379','1510860003716','1513265232822','1513130055131']
					// 	, mongoTrackIds = Object.keys(joinedData)
					// 	, mongoNoTestTrackIds = mongoTrackIds.filter(k => !joinedData[k].isTest)
					// 	, mongoTestTrackIds = mongoTrackIds.filter(k => joinedData[k].isTest)
					// 	, ampOnlyIds = ampTrackIds.filter(id => !mongoTrackIds.includes(id))
					// 	, mongoOnlyIds = mongoNoTestTrackIds.filter(id => !ampTrackIds.includes(id))
					// ;
					// console.log('Amplitude Only Ids', ampOnlyIds);
					// console.log('Mongo Only Ids', mongoOnlyIds);
				});
			});
		</script>
	</div>
	
	<div id='leads' style='display:none'>
		<h2>Daily Lead/App Count</h2>
		<div id='leadPlot'></div>
		<div>
			<h3>Amplitude Data</h3>
			<div><a href='https://analytics.amplitude.com/org/26411/chart/new/l54kdpq' target='_blank'>Chart</a></div>
			<div>
				<h4>Constraints</h4>
				<ul>
					<li>Generate Lead Event</li>
					<li>p:isDuplicate is not "True"</li>
					<li>gp:isTest is not "True"</li>
					<li>gp:isFake is not "True"</li>
					<li>isTestUser is not "True"</li>
					<li>dealer is not "(none)"</li>																																																																																					
				</ul>
			</div>
		</div>
	</div>

</body>

</html>